<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Emergency Force</title>
  <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon/favicon.ico') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/index.css') }}">

</head>

<body>
  <header>
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper indigo">
          <a href="#" class="brand-logo center hide-on-med-and-down">Emergency Force</a>
          <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
          <ul class="left hide-on-med-and-down">
            <li><a href="/asset">Asset</a></li>
            <li><a href="/report">Report</a></li>
            <li><a href="/plan">Recent Plan</a></li>
          </ul>
          <ul class="right">
            <li><a href="/logout">Log Out</a></li>
          </ul>
        </div>
      </nav>
    </div>
    <ul class="sidenav" id="mobile-demo">
        <li><a href="/asset">Asset</a></li>
        <li><a href="/report">Report</a></li>
        <li><a href="/plan">Recent Plan</a></li>
    </ul>
  </header>
  <main style="margin:30px">
    <div class="row">
      <div class="col s12 m6 l4" style="text-align:center">
        <div class="card blue-grey darken-1">
          <div class="card-content white-text">
            <span class="card-title">Assets Availability</span>
            <table class="responsive-table highlight">
              <thead>
                <tr>
                    <th>Type</th>
                    <th>Availability</th>
                </tr>
              </thead>
              <tbody id="assetTable">
              </tbody>
            </table>
          </div>
          <div class="card-action">
            <a href="/api/asset">API Link</a>
            <a href="#">Subscribe(RSS)</a>
          </div>
        </div>
      </div>
      <div class="col s12 m6 l4" style="text-align:center">
        <div class="card blue-grey darken-1">
          <div class="card-content white-text">
            <span class="card-title">Reports {{message}} </span>
            <table class="responsive-table highlight">
              <thead>
                <tr>
                    <th>Summary</th>
                    <th>Date</th>
                </tr>
              </thead>
              <tbody id="reportTable">
              </tbody>
            </table>
          </div>
          <div class="card-action">
            <a href="/api/report">API Link</a>
            <a href="#">Subscribe(RSS)</a>
          </div>
        </div>
      </div>
      <div class="col s12 m6 l4" style="text-align:center">
        <div class="card blue-grey darken-1">
          <div class="card-content white-text">
            <span class="card-title">Plan</span>
            <table class="responsive-table highlight">
              <thead>
                <tr>
                    <th>Details</th>
                    <th>Time</th>
                </tr>
              </thead>
              <tbody id="planTable">
              </tbody>
            </table>
            </div>
          <div class="card-action">
            <a href="/api/plan">API Link</a>
            <a href="#">Subscribe(RSS)</a>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script type="text/javascript">
    var plan_data = {{ plan|tojson|safe }}
    var asset_data = {{ asset|tojson|safe }}
    var report_data = {{ report|tojson|safe }}
    var x = document.getElementById("planTable");
    for (var key in plan_data) {
      row = x.insertRow(-1);
      cell1 = row.insertCell(0);
      cell2 = row.insertCell(1);
      cell1.innerHTML = plan_data[key]['details'];
      cell2.innerHTML = plan_data[key]['time'];
    }
    var y = document.getElementById("reportTable");
    for (var key in report_data) {
      row = y.insertRow(-1);
      cell1 = row.insertCell(0);
      cell2 = row.insertCell(1);
      cell1.innerHTML = report_data[key]['summary'];
      cell2.innerHTML = report_data[key]['time'];
    }
    var z = document.getElementById("assetTable");
    for (var key in asset_data) {
      row = z.insertRow(-1);
      cell1 = row.insertCell(0);
      cell2 = row.insertCell(1);
      cell1.innerHTML = asset_data[key]['Name'];
      cell2.innerHTML = asset_data[key]['Availability'];
    }
  </script>
  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/js/materialize.min.js"></script>
  <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</body>

</html>